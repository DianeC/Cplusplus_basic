## 第一章

1. 协议：传输数据时的发送方和接收方共同遵守的用来打包和解析数据的规则

2. 网络层
- OSI七层协议（早期：无数网运会表应）：应用层，表示层，会话层，运输层，网络层，数据链接层，物理层
- 因特网协议栈：应用层，运输层，网络层，链路层，物理层
- 应用层：包括很多协议，例如HTTP（web文档的请求和发送），SMTP（电子邮件报文的传输），FTP（两个端系统之间的文件传送），DNS（域名系统，把网址转换成32比特网络地址），位于应用层的信息分组称为报文（message）
- 运输层：TCP和UDP，运输层的信息分组称为报文段（segment）
- 网络层：网络层的信息分组称为 数据报（datagram），把数据段从一台主机移到另一台主机，IP协议，路由选择协议（邮递员的送信工作）
- 链路层：从一个传输节点传递给下一个节点。链路层的例子包括以太网，wifi和电缆接入网的DOCSIS协议。因为一个数据从源到目的地传输需要经过多个链路，一个数据报可能会被沿途不同链路上不同的链路层协议处理，链路层分组称为帧（frame）
- 物理层：链路层的任务是将整个帧从一个网络节点传输给下一个节点，物理层的任务是将该帧中的一个一个比特从一个节点移动到下一个节点，例如通过双绞铜线，光纤
- 七层模型中的表示层：
- 七层模型中的会话层：

2.1 链路层：以太网帧格式
- 结构：【以太网首部，14字节】【IP首部，20字节】【TCP首部，20字节】【**传输的数据**】【以太网尾部，4字节】
- 其中14字节的【以太网首部】的组成：【目的地址，6】【源地址，6】【类型，2】

3. 分组交换和电路交换
- 分组交换：长报文划分为小数据块，分为分组。每个分组都通过通信链路和分组交换机（交换机：路由器和链路层交换机）。分组以最大传输速率传输通过通信链路。
    - 存储转发传输：分组交换机在转发前需要接收，存储，处理整个分组，这里有个时延
    - 排队时延：分组交换机有**输出缓存**，如果到达的分组需要传输到某条链路，但是该链路正忙于传输其他分组，该分组会在输出缓存中等待。因此，除了存储转发的时延外，分组还要承受输出缓存的排队时延
    - 分组丢失：缓存的空间是有限的，新到达的分组发现缓存空间已满，这个分组或者已经排队的分组之一会被丢弃**丢哪个？**
- 电路交换：电路交换指端系统间通信时，预留了沿路径所需要的资源（缓存，链路传输速率）。传统的电话网络是电路交换网络的例子，在通信时，发送方和接收方建立了一条连接，这是一个名副其实的连接，路径上所有的交换机都在维护连接状态，预留一定的带宽专门用于两者通信
    - 实现方式-频分复用：预留的为特定频段（持续的得到部分带宽）
    - 实现方式-时分复用：预留的为特定时间段，即使没有被使用，该时间段也是固定分配的（周期性的得到所有带宽）
- 分组交换和电路交换的对比：
    - 分组交换的缺点：端到端的时延是可变的和不可预测的（对于多用户的情况，支持效果优于电路交换）
    - 分组交换的优点：比电路交换更好的带宽，更简单有效
    - 电路交换的缺点：资源浪费
    - 两种都是普遍采用的方式，但是趋势是朝着分组交换的方向发展

4. 转发表和路由选择协议

5. 端系统
- PC，智能手机，web服务器，电子邮件服务器
- 经过一个接入ISP（？？？）与因特网相连
- 该接入ISP能够提供有线或者无线连接，使用了包括DSL，电缆，FTTH，wifi和蜂窝等多种接入技术

5.1 主机是什么，和端系统之间的区别
- 主机和端系统在 计算机网络 课程 中可以视作等价概念，端系统是一种抽象概念，主机是端系统的实例。Web服务器是一种端系统，实体是主机
- 主机是有ip的
- 端系统是一个产生数据的设备：手机，电脑

6. 网络的网络
- 设想的网络结构1: 全球承载ISP 互联 所有的接入ISP
- 设想的网络结构2: 多个全球承载ISP 互联（第一层）；与多个区域ISP 互联（第二层）；再与接入ISP 互联（三层）
- 设想的网络结构3: 第一层ISP 国家级ISP 省级ISP 城市ISP ... 接入ISP
- 设想的网络结构4: **待增加**
- 网络结构5，2012年的因特网：

7. 6种接入技术**待增加**
- 电话线拨号接入
- 光纤
- 无线

8. 计算端到端的总时延（忽略排队时延，传播时延，处理时延）

9. 电路交换中，TDM和FDM相比，有什么优势

10. 求吞吐量

11. 病毒和蠕虫的区别

12. 僵尸网络，怎样被DDoS攻击的
僵尸网络的英文名字叫botnet，取自机器人robot的后半部分和网络network的前半部分。因此，僵尸网络的表面意思是由机器人组成的网络。[1]实际上，真实的网络犯罪分子会通过漏洞正面进攻没有及时打补丁的脆弱系统，也会通过木马病毒侧面进攻缺乏网络安全意识的人，从而获得计算机系统的控制权限，简称“肉鸡”或“僵尸主机”。那么黑客控制了成百上千台“僵尸主机”之后，他会做什么事情呢？这就涉及到僵尸网络的应用场景，最常见的应该是DDoS分布式拒绝服务。

## 网络通信过程
- 数据通过层层封装后才能进行传输（应 传 网络层 链路层）
- 接收后层层解析得到原始数据    （链路层 网络层 传 应用层）
- 用户需要在应用层进行封装操作，后面的【内核层】中的封装用户不用操作，由系统自动封装


## 第二章：应用层
1. 举例：万维网，p2p文件共享，油管，网飞，在线游戏
2. 研发应用程序的核心是写出能运行在不同端系统，并且能通过网络彼此通信的程序。web应用程序中的通信：浏览器程序与web服务器程序
3. 应用程序有两种： 
    - 客户 - 服务器体系结构
    - 对等体系结构（p2p）
4. 客户 - 服务器体系结构的特征
    - 服务器程序总是打开，服务于客户的请求
    - 该服务器有固定的IP地址，并且由于该服务器一直是打开的，客户总是可以通过向该服务器的IP地址发送分组来与其联系
    - 不算特征，一对多的情况，服务器可能会处理不了所有的用户请求，因此会有多个服务器（配备大量主机的数据中心）

5. 一些简记
应用层：例如邮件
运输层：端到端，tcp和udp，其中tcp是安全保证的
传输层：ip，点到点转发，不安全，不可靠，无连接的数据报传输服务，不保证顺序，tcp会排序
ping 是一个应用程序，调用了icmp-ip-链路层
http 也是一个应用程序
端口号？服务器是知名端口号，客户端端口号是临时端口号
链路层：以太网；802.3，一般情况下是以太网
IP地址是逻辑地址
mac地址是硬件地址
传给环回接口的数据均作为ip输入
nat？
链路层：mtu最大传输单元，如果ip有一个数据要传，但是这个数据大于mtu，那么会进行分片，出方向的时候进行分片
路径mtu是整条路径中的最小的mtu
ip头部：生存时间，最初255，每过一个-1，防止环路

6. 环回口
ip：127开头




9、三次握手，四次挥手，中间的等待
第一次握手：建立连接时，客户端发送syn包（syn=j）到服务器，并进入SYN_SENT状态，等待服务器确认；SYN：同步序列编号（Synchronize Sequence Numbers）。

第二次握手：服务器收到syn包，必须确认客户的SYN（ack=j+1），同时自己也发送一个SYN包（syn=k），即SYN+ACK包，此时服务器进入SYN_RECV状态；

第三次握手：客户端收到服务器的SYN+ACK包，向服务器发送确认包ACK(ack=k+1），此包发送完毕，客户端和服务器进入ESTABLISHED（TCP连接成功）状态，完成三次握手。

1）客户端进程发出连接释放报文，并且停止发送数据。释放数据报文首部，FIN=1，其序列号为seq=u（等于前面已经传送过来的数据的最后一个字节的序号加1），此时，客户端进入FIN-WAIT-1（终止等待1）状态。 TCP规定，FIN报文段即使不携带数据，也要消耗一个序号。
2）服务器收到连接释放报文，发出确认报文，ACK=1，ack=u+1，并且带上自己的序列号seq=v，此时，服务端就进入了CLOSE-WAIT（关闭等待）状态。TCP服务器通知高层的应用进程，客户端向服务器的方向就释放了，这时候处于半关闭状态，即客户端已经没有数据要发送了，但是服务器若发送数据，客户端依然要接受。这个状态还要持续一段时间，也就是整个CLOSE-WAIT状态持续的时间。
3）客户端收到服务器的确认请求后，此时，客户端就进入FIN-WAIT-2（终止等待2）状态，等待服务器发送连接释放报文（在这之前还需要接受服务器发送的最后的数据）。
4）服务器将最后的数据发送完毕后，就向客户端发送连接释放报文，FIN=1，ack=u+1，由于在半关闭状态，服务器很可能又发送了一些数据，假定此时的序列号为seq=w，此时，服务器就进入了LAST-ACK（最后确认）状态，等待客户端的确认。
5）客户端收到服务器的连接释放报文后，必须发出确认，ACK=1，ack=w+1，而自己的序列号是seq=u+1，此时，客户端就进入了TIME-WAIT（时间等待）状态。注意此时TCP连接还没有释放，必须经过2∗∗MSL（最长报文段寿命）的时间后，当客户端撤销相应的TCB后，才进入CLOSED状态。
6）服务器只要收到了客户端发出的确认，立即进入CLOSED状态。同样，撤销TCB后，就结束了这次的TCP连接。可以看到，服务器结束TCP连接的时间要比客户端早一些。


21、udp怎么保证能收到数据?
udp与tcp的区别
         TCP（TransmissionControl Protocol 传输控制协议）是一种面向连接的、可靠的、基于字节流的传输层通信协议。

         UDP是User Datagram Protocol，一种无连接的传输层协议，提供面向事务的简单不可靠信息传送服务。可靠性由上层应用实现，所以要实现udp可靠性传输，必须通过应用层来实现和控制。

TCP如何实现可靠性传输？

         确认机制、重传机制、滑动窗口。


问17：TCP和UDP通信的差别？什么是IOCP？
答：

1.TCP面向连接， UDP面向无连接的

2.TCP有保障的，UDP传输无保障的

3.TCP是效率低的，UDP效率高的

4.TCP是基于流的，UDP基于数据报文

5.TCP传输重要数据，UDP传输不重要的数据

IOCP全称I/O Completion Port，中文译为I/O完成端口。

IOCP是一个异步I/O的API，它可以高效地将I/O事件通知给应用程序。

与使用select()或是其它异步方法不同的是，一个套接字[socket]与一个完成端口关联了起来，然后就可继续进行正常的Winsock操作了。然而，当一个事件发生的时候，此完成端口就将被操作系统加入一个队列中。然后应用程序可以对核心层进行查询以得到此完成端口。

三次握手四次挥手：https://www.cnblogs.com/LUO77/p/5771237.html
https://www.cnblogs.com/LUO77/p/5771237.html